(function(b,a){dshop.add("verify",function(){var c=function(d,g){var f={form:null,target:null,cls:null,success:null,blur:false,batchcallback:null,batchafter:null,trim:true,checktrue:null,focusfn:null,attrname:"data-v"};var e={empty:function(h){if(h==""){return false}return true},num:function(h){if(isNaN(h)){return false}return true},l:function(j,i,h){if(j.length<i||j.length>h){return false}return true},selected:function(h){if(h==0||h==""||h==undefined||h==null){return false}return true},n:function(j,i,h){if(j<i||j>h){return false}return true},zip:function(h){return(/^\d{6}$/).test(h)},phone:function(h){return(/^(?:13\d|15\d|18\d)-?\d{5}(\d{3}|\*{3})$/).test(h)},tel:function(h){return(/^[+]{0,1}(\d){1,4}[ ]{0,1}([-]{0,1}((\d)|[ ]){1,12})+$/).test(h)},email:function(h){return(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/).test(h)},equal:function(i,h){if(i!=b(h).val()){return false}return true},same:function(i,h){if(i==h){return false}return true},checked:function(i,h){if(!b(h).attr("checked")){return false}return true},sp:function(i){var h=/[\~|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\,|\s|\\|\||>|<|\?|\/|\;|\:|\"|\'|\{|\}|\[|\]|\`]/g;if(i.match(h)){return false}return true}};b.extend(f,d);b.extend(e,g);this.rule=e;this.config=f;this.data={};dshop.mods.verify.rule=e};c.prototype={init:function(){var e=this,d=e.config;if(!d.cls){return}if((!d.form&&!d.target)||(d.form&&d.target)){return}if(d.form){e._form(d.form)}else{if(d.target){e._target(d.target)}}if(d.blur){b(d.cls).live("blur",function(){var f=b(this);e._bacthone(f)});b(d.cls).live("focus",function(){var f=b(this);if(d.focusfn){d.focusfn(f)}})}},_form:function(f){var e=this,d=e.config;b(f).live("submit",function(){var g=e._batch(d.cls);if(g&&d.success){d.success(e.data)}return false})},_target:function(d){var f=this,e=f.config;b(d).live("click",function(){var g=f._batch(e.cls);if(g&&e.success){e.success(f.data)}return false})},_translate:function(k){var d=k.split("|"),g={};for(var f=0;f<d.length;f++){var l=d[f].split(":"),e=l[0],j=l[1],h=(l[2])?l[2].split(","):[];g[e]={msg:j,arg:h}}return g},_bacthone:function(j){var h=this,g=h.config,l=b.trim(j.val()),k=j.attr(g.attrname),e=h._translate(k);if(g.trim){b(j).val(l)}for(var f in e){e[f]["arg"].splice(0,0,l);var d=h.rule[f].apply(this,e[f]["arg"]);if(!d){if(g.batchcallback){g.batchcallback(l,e[f]["msg"],j)}break}else{if(g.checktrue){g.checktrue(j)}}}},_batch:function(e){var h=this,g=h.config,d=true,f=0;b(e).each(function(l,n){var p=b.trim(b(this).val()),o=b(this).attr(g.attrname),k=h._translate(o);if(g.trim){b(n).val(p)}f++;for(var m in k){k[m]["arg"].splice(0,0,p);var j=h.rule[m].apply(this,k[m]["arg"]);if(!j){d=false;if(g.batchcallback){g.batchcallback(p,k[m]["msg"],n)}break}else{var n=b(this);if(g.checktrue){g.checktrue(n)}}}if(!d){return false}else{if(b(this).attr("name")){h.data[b(this).attr("name")]=p}else{h.data[f]=p}}});return d}};dshop.mods.verify=c})})(jQuery,window);