(function(a,b){dshop.add("paging",function(){var c=function(f){var e={count:null,onepagesize:10,current:1,clsname:"page",currentcls:"active",dotcls:"none",nodecls:"J_N",inlinestyletext:"margin-top:20px;",template:'<span>{{#prev}}<a class="J_prev" href="javascript:void(0);">{{text}}</a>{{/prev}}{{#n}}<a class="{{currentcls}} {{dotclscls}} {{cls}}" href="javascript:void(0);">{{text}}</a>{{/n}}{{#next}}<a class="J_next" href="javascript:void(0);">{{text}}</a>{{/next}}</span>',viewsize:5,prevfn:null,nextfn:null,sizeclick:null,wrap:null,wrapid:"#J_Page"+new Date().valueOf()};b.extend(e,f);this.cg=e};var d={createdigit:function(j,l,e,n,m,h){var g=[],k=l-Math.floor(e/2);if(k<=0){k=1}if(e>j){e=j}for(var f=0;f<e;f++){if(k+f>j){break}var o={text:k+f,cls:h};if(l==k+f){o.currentcls=n}g.push(o)}if(g[0].text!=1){if(g[0].text-1>1){g.unshift({text:"..",cls:m})}g.unshift({text:1,cls:h})}if(g[g.length-1].text!=j){if(g[g.length-1].text+1!=j){g.push({text:"..",cls:m})}g.push({text:j,cls:h})}return g},createtempobject:function(i,j,h){var e={},k=d.createdigit(i,j,h.viewsize,h.currentcls,h.dotcls,h.nodecls),f={text:"下一页"},g={text:"上一页"};if(k[1]&&k[1]["text"]==".."){e.prev=g}if(k[k.length-2]&&k[k.length-2]["text"]==".."){e.next=f}e.n=k;return e},};c.prototype={_initevent:function(g,f,i,e){var h=this;b(g).find(".J_prev").live("click",function(){var j=b(this);h.cg.current=h.cg.current-1;if(f){f(h.cg.current,j)}return false});b(g).find(".J_next").live("click",function(){var j=b(this);h.cg.current=h.cg.current+1;if(i){i(h.cg.current,j)}return false});b(g).find(".J_N").live("click",function(){var j=b(this);h.cg.current=j.text();if(e){e(h.cg.current,j)}return false})},rebuild:function(h,j){var g=this,f=g.cg,h=Math.ceil(f.count/f.onepagesize),e=d.createtempobject(h,j,g.cg),i=dshop.mods.template.to_html(g.cg.template,e);b(g.cg.wrapid).html(i)},init:function(){var g=this,f=g.cg,e=d.createtempobject(Math.ceil(f.count/f.onepagesize),f.current,f),h=dshop.mods.template.to_html(f.template,e);b(f.wrap).html('<div id="'+f.wrapid.slice(1)+'" class="'+f.clsname+'" style="'+f.inlinestyletext+'"></div>');b(f.wrapid).html(h);g._initevent(f.wrapid,f.prevfn,f.nextfn,f.sizeclick)},getattr:function(e){return this.cg[e]},setattr:function(e,f){this.cg[e]=f}};dshop.mods.paging=c})})(window,jQuery);