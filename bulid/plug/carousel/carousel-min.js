(function(a,b){dshop.add("carousel",function(){var c=function(d){var e=function(){var f=function(n){var m=n.wrap,j=n.wrapitem;if(m==""||j==""){return}var o=b(j).eq(0),i,l,k=b(j).size();if(n.direction=="left"){i=o.outerWidth()*k;l=o.outerHeight()}else{if(n.direction=="top"){i=o.outerWidth();l=o.outerHeight()*k}else{return}}var g=b("<div>").css({height:l,width:i,position:"absolute"}).addClass("fixclear");b(m).css({overflow:"hidden",position:"relative",width:o.outerWidth(),height:o.outerHeight()}).prepend(g);b(m).find(j).appendTo(g);b(j).css("float","left");if(b(m).find(".fixclear").length>1){b(m).find(".fixclear").last().remove()}};return{_init:function(h){var g={wrap:"",wrapitem:"",direction:"left",before:function(){},after:function(){},current:0,endflg:true,auto:false,autointerval:3000,endtoend:false};b.extend(g,h);this.config=g;this.T=null;f(this.config);if(this.config.auto){this.auto();this.autoEvent()}}}}();e._init.prototype={forward:function(){var h=this,g=h.config,i=b(g.wrap).find(".fixclear"),f=b(g.wrap).find(g.wrapitem).length;if(g.endflg){g.endflg=false;g.current++;if(g.current>f-1){g.current=0}if(g.endtoend&&g.current==0){i.css("left",b(g.wrap).width())}h.to(g.current)}},backward:function(){var h=this,g=h.config,i=b(g.wrap).find(".fixclear"),f=b(g.wrap).find(g.wrapitem).length;if(g.endflg){g.endflg=false;g.current--;if(g.current<0){g.current=f-1}if(g.endtoend&&g.current==f-1){i.css("left",-i.width())}h.to(g.current)}},to:function(f){var k=this,j=k.config,i={},m=b(j.wrap).find(".fixclear"),h=m.width(),g=b(j.wrap).find(j.wrapitem).length;if(f>g||f<0){return}j.current=f;if(j.direction=="left"){i={left:"-"+b(j.wrap).width()*f}}else{if(j.direction=="top"){i={top:"-"+b(j.wrap).height()*f}}}k.before(j.current);m.animate(i,500,function(){k.after(j.current);j.endflg=true})},auto:function(){var g=this,f=g.config;g.T=setInterval(function(){g.forward()},f.autointerval)},stopauto:function(){var f=this;clearInterval(f.T)},autoEvent:function(){var g=this,f=g.config;b(f.wrap).live("mouseenter",function(){g.stopauto()}).live("mouseleave",function(){g.auto()})},before:function(h){var g=this,f=g.config;f.before(h)},after:function(h){var g=this,f=g.config;f.after(h)},getcurrent:function(){return this.config.current}};return new e._init(d)};dshop.mods.carousel=c})})(window,jQuery);